{# Item cart custom template #}

<table class="cleantd">
	<tr>
		<td style="width: 100%; padding: 3px">
			<div id="{{ plugin.id }}_{{ forloop.counter0 }}_selections_div"></div>
			<script type="text/javascript">
				{{ plugin.id }}.displayImageCount('{{ data.userData.idList }}', '{{ plugin.id }}_{{ forloop.counter0 }}_selections_div');
			</script>
			<table class="plugin_small">
				<tr>
					<td><span class="flatLetter">Exit if flat image missing:</span></td>
					<td class="flatMissing">{% ifequal data.userData.exitIfFlatMissing 1 %}yes{% else %}no{% endifequal %}</td>
				</tr>
				<tr>
					<td><span class="flatLetter">Exit if mask image missing:</span></td>
					<td class="flatMissing">{% ifequal data.userData.exitIfMaskMissing 1 %}yes{% else %}no{% endifequal %}</td>
				</tr>
				<tr>
					<td><span class="flatLetter">Flat normalization:</span></td>
					<td class="flatMissing">{% if data.userData.flatNormMethod %}{{ data.userData.flatNormMethod }}{% else %}-{% endif %}</td>
				</tr>
				<tr>
					<td><span class="flatLetter">Flat path:</span></td>
					<td>{{ data.userData.flatPath }}</td>
				</tr>
				<tr>
					<td><span class="maskLetter">Mask path:</span></td>
					<td>{{ data.userData.maskPath }}</td>
				</tr>
				{% if data.userData.regPath %}
				<tr>
					<td><span class="regLetter">Reg path:</span></td>
					<td>{{ data.userData.regPath }}</td>
				</tr>
				{% endif %}
				<tr>
					<td><span class="confLetter">Config:</span></td>
				{% if data.userData.taskId %}
					<td><a target="blank" href="/youpi/results/{{ plugin.id }}/{{ data.userData.taskId }}/">{{ data.userData.config }}</a></td>
				{% else %}
					<td>{{ data.userData.config }}</td>
				{% endif %}
				</tr>
				<tr>
					<td><span class="confLetter">Results output dir:</span></td>
					<td>{{ data.userData.resultsOutputDir }}</td>
				</tr>
			</table>
			<div id="{{ plugin.id }}_images_div_{{ forloop.counter0 }}" style="display: none;"></div>
		</td>
	</tr>
</table>

<script type="text/javascript">
	document.observe('dom:loaded', function() {
		var trid = '{{ plugin.id }}_{{ forloop.counter0 }}';
		youpi_pc_meta[trid] = {};
		youpi_pc_meta[trid].userData = $H(eval('(' + '{{ data.userData }}'.unescapeHTML() + ')'));
		youpi_pc_meta[trid].userData.set('ItemId', '{{ plugin.itemPrefix }}{{ data.itemCounter }}');
	});
</script>
