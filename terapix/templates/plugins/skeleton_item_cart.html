{# Item cart Skeleton template #}

<table class="cleantd">
	<tr>
		<td style="width: 100%; padding: 3px">
			<p>This is a <b>demo-related job</b>. 5 jobs will be sent to the Condor cluster if you click on the 'Run' button.</p>
			<p>Each job will try to execute the <tt>/usr/bin/uptime</tt> command once on cluster node.</p>
			<table class="plugin_small">
				<tr>
					<td><span class="confLetter">Results output dir:</span> {{ data.userData.resultsOutputDir }}</td>
				</tr>
			</table>
		</td>
	</tr>
</table>

<script type="text/javascript">
	document.observe('dom:loaded', function() {
		$('{{ plugin.id }}_{{ forloop.counter0 }}_run').observe('click', function() {
			var userData = $H(eval('(' + '{{ data.userData }}'.unescapeHTML() + ')'));
			userData.set('ItemId', '{{ plugin.itemPrefix }}{{ data.itemCounter }}');
			boxes.confirm('Are you sure you want to submit this item to the cluster?', function() {
				{{ plugin.id }}.run('{{ plugin.id }}_{{ forloop.counter0 }}', capitalizeHashKeys(userData));
			});
		});

		$('{{ plugin.id }}_{{ forloop.counter0 }}_save').observe('click', function() {
			var userData = $H(eval('(' + '{{ data.userData }}'.unescapeHTML() + ')'));
			userData.set('ItemId', '{{ plugin.itemPrefix }}{{ data.itemCounter }}');
			{{ plugin.id }}.saveItemForLater('{{ plugin.id }}_{{ forloop.counter0 }}', capitalizeHashKeys(userData));
		});
	});
</script>
